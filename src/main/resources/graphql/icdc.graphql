type adverse_event {
  day_in_cycle: Int
  date_of_onset: String
  existing_adverse_event: String
  date_of_resolution: String
  ongoing_adverse_event: String
  adverse_event_term: String
  adverse_event_description: String
  adverse_event_grade: String
  adverse_event_grade_description: String
  adverse_event_agent_name: String
  adverse_event_agent_dose: String
  attribution_to_research: String
  attribution_to_ind: String
  attribution_to_disease: String
  attribution_to_commercial: String
  attribution_to_other: String
  other_attribution_description: String
  dose_limiting_toxicity: String
  unexpected_adverse_event: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
  agent: agent @relation(name:"of_agent", direction:OUT)
  cases: [case] @relation(name:"had_adverse_event", direction:IN)
  next_adverse_event: adverse_event @relation(name:"next", direction:OUT)
  prior_adverse_event: adverse_event @relation(name:"next", direction:IN)
}

type agent {
  medication: String
  document_number: String
  crdc_id: String
  study_arms: [study_arm] @relation(name:"of_study_arm", direction:OUT)
  agent_administrations: [agent_administration] @relation(name:"of_agent", direction:IN)
  adverse_events: [adverse_event] @relation(name:"of_agent", direction:IN)
}

type agent_administration {
  document_number: String
  medication: String
  route_of_administration: String
  medication_lot_number: String
  medication_vial_id: String
  medication_actual_units_of_measure: String
  medication_duration: Float
  medication_duration_unit: String
  medication_duration_original: Float
  medication_duration_original_unit: String
  medication_units_of_measure: String
  medication_actual_dose: Float
  medication_actual_dose_unit: String
  medication_actual_dose_original: Float
  medication_actual_dose_original_unit: String
  phase: String
  start_time: String
  stop_time: String
  dose_level: Float
  dose_level_unit: String
  dose_level_original: Float
  dose_level_original_unit: String
  dose_units_of_measure: String
  date_of_missed_dose: String
  medication_missed_dose: String
  missed_dose_amount: Float
  missed_dose_amount_unit: String
  missed_dose_amount_original: Float
  missed_dose_amount_original_unit: String
  missed_dose_units_of_measure: String
  medication_course_number: String
  comment: String
  crdc_id: String
  agent: agent @relation(name:"of_agent", direction:OUT)
  visit: visit @relation(name:"on_visit", direction:OUT)
}

type assay {
  sample: sample @relation(name:"of_sample", direction:OUT)
  files: [file] @relation(name:"of_assay", direction:IN)
  images: [image] @relation(name:"of_assay", direction:IN)
}

type biospecimen_source {
  biospecimen_repository_acronym: String
  biospecimen_repository_full_name: String
  crdc_id: String
}

type canine_individual {
  canine_individual_id: String
  crdc_id: String
  cases: [case] @relation(name:"represents", direction:IN)
}

type case {
  case_id: String
  patient_id: String
  patient_first_name: String
  crdc_id: String
  cohort: cohort @relation(name:"member_of", direction:OUT)
  study: study @relation(name:"member_of", direction:OUT)
  enrollment: enrollment @relation(name:"of_case", direction:IN)
  demographic: demographic @relation(name:"of_case", direction:IN)
  diagnosis: diagnosis @relation(name:"of_case", direction:IN)
  cycles: [cycle] @relation(name:"of_case", direction:IN)
  follow_ups: [follow_up] @relation(name:"of_case", direction:IN)
  samples: [sample] @relation(name:"of_case", direction:IN)
  files: [file] @relation(name:"of_case", direction:IN)
  visits: [visit] @relation(name:"of_case", direction:IN)
  adverse_events: [adverse_event] @relation(name:"of_case", direction:IN)
  registrations: [registration] @relation(name:"of_case", direction:IN)
  study_arm: study_arm @relation(name:"of_study_arm", direction:OUT)
  adverse_event: adverse_event @relation(name:"had_adverse_event", direction:OUT)
  off_study: off_study @relation(name:"went_off_study", direction:OUT)
  off_treatment: off_treatment @relation(name:"went_off_treatment", direction:OUT)
  canine_individual: canine_individual @relation(name:"represents", direction:OUT)
}

type cohort {
  cohort_description: String
  cohort_id: String
  cohort_dose: String
  crdc_id: String
  cases: [case] @relation(name:"member_of", direction:IN)
  study_arm: study_arm @relation(name:"member_of", direction:OUT)
  study: study @relation(name:"member_of", direction:OUT)
}

type cycle {
  cycle_number: Int
  date_of_cycle_start: String
  date_of_cycle_end: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
  visits: [visit] @relation(name:"of_cycle", direction:IN)
}

type demographic {
  demographic_id: String
  breed: String
  additional_breed_detail: String
  patient_age_at_enrollment: Float
  patient_age_at_enrollment_unit: String
  patient_age_at_enrollment_original: Float
  patient_age_at_enrollment_original_unit: String
  date_of_birth: String
  sex: String
  weight: Float
  weight_unit: String
  weight_original: Float
  weight_original_unit: String
  neutered_indicator: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
}

type diagnosis {
  diagnosis_id: String
  disease_term: String
  primary_disease_site: String
  stage_of_disease: String
  date_of_diagnosis: String
  histology_cytopathology: String
  date_of_histology_confirmation: String
  histological_grade: String
  best_response: String
  pathology_report: String
  treatment_data: String
  follow_up_data: String
  concurrent_disease: String
  concurrent_disease_type: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
  files: [file] @relation(name:"from_diagnosis", direction:IN)
}

type disease_extent {
  lesion_number: Int
  lesion_site: String
  lesion_description: String
  previously_irradiated: String
  previously_treated: String
  measurable_lesion: String
  target_lesion: String
  date_of_evaluation: String
  measured_how: String
  longest_measurement: Float
  longest_measurement_unit: String
  longest_measurement_original: Float
  longest_measurement_original_unit: String
  evaluation_number: Int
  evaluation_code: String
  crdc_id: String
  visit: visit @relation(name:"on_visit", direction:OUT)
}

type enrollment {
  enrollment_id: String
  date_of_registration: String
  registering_institution: String
  initials: String
  date_of_informed_consent: String
  site_short_name: String
  veterinary_medical_center: String
  patient_subgroup: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
  prior_therapies: [prior_therapy] @relation(name:"at_enrollment", direction:IN)
  prior_surgeries: [prior_surgery] @relation(name:"at_enrollment", direction:IN)
  physical_exams: [physical_exam] @relation(name:"at_enrollment", direction:IN)
}

type file {
  file_name: String
  file_type: String
  file_description: String
  file_format: String
  file_size: Int
  md5sum: String
  file_status: String
  uuid: String
  file_location: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
  study: study @relation(name:"of_study", direction:OUT)
  sample: sample @relation(name:"of_sample", direction:OUT)
  assay: assay @relation(name:"of_assay", direction:OUT)
  diagnosis: diagnosis @relation(name:"from_diagnosis", direction:OUT)
}

type follow_up {
  document_number: String
  date_of_last_contact: String
  patient_status: String
  explain_unknown_status: String
  contact_type: String
  treatment_since_last_contact: Boolean
  physical_exam_performed: Boolean
  physical_exam_changes: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
}

type human_relevance {
  human_relevance_record_id: String
  human_relevance_statement: String
  relevant_human_cancer: String
  relevant_experimental_therapeutic_intervention: String
  relevant_human_genes: String
  relevant_human_pathways: String
  nci_link_to_relevant_human_cancer: String
  study: study @relation(name:"of_study", direction:OUT)
}

type image {
  assay: assay @relation(name:"of_assay", direction:OUT)
}

type image_collection {
  image_collection_name: String
  image_type_included: String
  image_collection_url: String
  repository_name: String
  collection_access: String
  crdc_id: String
  study: study @relation(name:"of_study", direction:OUT)
}

type lab_exam {
  visit: visit @relation(name:"on_visit", direction:OUT)
}

type off_study {
  document_number: String
  date_off_study: String
  reason_off_study: String
  date_of_disease_progression: String
  date_off_treatment: String
  best_resp_vet_tx_tp_secondary_response: String
  date_last_medication_administration: String
  best_resp_vet_tx_tp_best_response: String
  date_of_best_response: String
  crdc_id: String
  case: case @relation(name:"went_off_study", direction:IN)
}

type off_treatment {
  document_number: String
  date_off_treatment: String
  reason_off_treatment: String
  date_of_disease_progression: String
  best_resp_vet_tx_tp_secondary_response: String
  date_last_medication_administration: String
  best_resp_vet_tx_tp_best_response: String
  date_of_best_response: String
  crdc_id: String
  case: case @relation(name:"went_off_treatment", direction:IN)
}

type physical_exam {
  date_of_examination: String
  day_in_cycle: Int
  body_system: String
  pe_finding: String
  pe_comment: String
  phase_pe: String
  assessment_timepoint: String
  crdc_id: String
  enrollment: enrollment @relation(name:"at_enrollment", direction:OUT)
  visit: visit @relation(name:"on_visit", direction:OUT)
}

type principal_investigator {
  pi_first_name: String
  pi_last_name: String
  pi_middle_initial: String
  crdc_id: String
  studies: [study] @relation(name:"of_study", direction:OUT)
}

type prior_surgery {
  date_of_surgery: String
  procedure: String
  anatomical_site_of_surgery: String
  surgical_finding: String
  residual_disease: String
  therapeutic_indicator: String
  crdc_id: String
  enrollment: enrollment @relation(name:"at_enrollment", direction:OUT)
  next_prior_surgery: prior_surgery @relation(name:"next", direction:OUT)
  prior_prior_surgery: prior_surgery @relation(name:"next", direction:IN)
}

type prior_therapy {
  date_of_first_dose: String
  date_of_last_dose: String
  agent_name: String
  dose_schedule: String
  total_dose: Float
  total_dose_unit: String
  total_dose_original: Float
  total_dose_original_unit: String
  agent_units_of_measure: String
  best_response_to_prior_therapy: String
  nonresponse_therapy_type: String
  prior_therapy_type: String
  prior_steroid_exposure: Boolean
  number_of_prior_regimens_steroid: Int
  total_number_of_doses_steroid: Int
  date_of_last_dose_steroid: String
  prior_nsaid_exposure: Boolean
  number_of_prior_regimens_nsaid: Int
  total_number_of_doses_nsaid: Int
  date_of_last_dose_nsaid: String
  tx_loc_geo_loc_ind_nsaid: String
  min_rsdl_dz_tx_ind_nsaids_treatment_pe: String
  therapy_type: String
  any_therapy: Boolean
  number_of_prior_regimens_any_therapy: Int
  total_number_of_doses_any_therapy: Int
  date_of_last_dose_any_therapy: String
  treatment_performed_at_site: Boolean
  treatment_performed_in_minimal_residual: Boolean
  crdc_id: String
  enrollment: enrollment @relation(name:"at_enrollment", direction:OUT)
  next_prior_therapy: prior_therapy @relation(name:"next", direction:OUT)
  prior_prior_therapy: prior_therapy @relation(name:"next", direction:IN)
}

type program {
  program_name: String
  program_acronym: String
  program_short_description: String
  program_full_description: String
  program_external_url: String
  program_sort_order: Int
  crdc_id: String
  studies: [study] @relation(name:"member_of", direction:IN)
}

type publication {
  publication_title: String
  authorship: String
  year_of_publication: Float
  journal_citation: String
  digital_object_id: String
  pubmed_id: Float
  crdc_id: String
  study: study @relation(name:"of_study", direction:OUT)
}

type registration {
  registration_origin: String
  registration_id: String
  crdc_id: String
  cases: [case] @relation(name:"of_case", direction:OUT)
}

type sample {
  sample_id: String
  sample_site: String
  physical_sample_type: String
  general_sample_pathology: String
  tumor_sample_origin: String
  summarized_sample_type: String
  molecular_subtype: String
  specific_sample_pathology: String
  date_of_sample_collection: String
  sample_chronology: String
  necropsy_sample: String
  tumor_grade: String
  length_of_tumor: Float
  length_of_tumor_unit: String
  length_of_tumor_original: Float
  length_of_tumor_original_unit: String
  width_of_tumor: Float
  width_of_tumor_unit: String
  width_of_tumor_original: Float
  width_of_tumor_original_unit: String
  volume_of_tumor: Float
  volume_of_tumor_unit: String
  volume_of_tumor_original: Float
  volume_of_tumor_original_unit: String
  percentage_tumor: String
  sample_preservation: String
  comment: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
  visit: visit @relation(name:"on_visit", direction:OUT)
  assays: [assay] @relation(name:"of_sample", direction:IN)
  files: [file] @relation(name:"of_sample", direction:IN)
  next_sample: sample @relation(name:"next", direction:OUT)
  prior_sample: sample @relation(name:"next", direction:IN)
}

type study {
  clinical_study_id: String
  clinical_study_designation: String
  clinical_study_name: String
  clinical_study_description: String
  clinical_study_type: String
  date_of_iacuc_approval: String
  dates_of_conduct: String
  accession_id: String
  study_disposition: String
  crdc_id: String
  study_arms: [study_arm] @relation(name:"member_of", direction:IN)
  program: program @relation(name:"member_of", direction:OUT)
  cases: [case] @relation(name:"member_of", direction:IN)
  cohorts: [cohort] @relation(name:"member_of", direction:IN)
  human_relevance: human_relevance @relation(name:"of_study", direction:IN)
  study_sites: [study_site] @relation(name:"of_study", direction:IN)
  principal_investigators: [principal_investigator] @relation(name:"of_study", direction:IN)
  files: [file] @relation(name:"of_study", direction:IN)
  image_collections: [image_collection] @relation(name:"of_study", direction:IN)
  publications: [publication] @relation(name:"of_study", direction:IN)
}

type study_arm {
  arm: String
  arm_description: String
  arm_id: String
  ctep_treatment_assignment_code: String
  crdc_id: String
  cohorts: [cohort] @relation(name:"member_of", direction:IN)
  study: study @relation(name:"member_of", direction:OUT)
  agents: [agent] @relation(name:"of_study_arm", direction:IN)
  cases: [case] @relation(name:"of_study_arm", direction:IN)
}

type study_site {
  site_short_name: String
  veterinary_medical_center: String
  registering_institution: String
  crdc_id: String
  studies: [study] @relation(name:"of_study", direction:OUT)
}

type visit {
  visit_date: String
  visit_number: Int
  visit_id: String
  crdc_id: String
  case: case @relation(name:"of_case", direction:OUT)
  cycle: cycle @relation(name:"of_cycle", direction:OUT)
  agent_administrations: [agent_administration] @relation(name:"on_visit", direction:IN)
  samples: [sample] @relation(name:"on_visit", direction:IN)
  physical_exams: [physical_exam] @relation(name:"on_visit", direction:IN)
  lab_exams: [lab_exam] @relation(name:"on_visit", direction:IN)
  disease_extents: [disease_extent] @relation(name:"on_visit", direction:IN)
  vital_signs: [vital_signs] @relation(name:"on_visit", direction:IN)
  next_visit: visit @relation(name:"next", direction:OUT)
  prior_visit: visit @relation(name:"next", direction:IN)
}

type vital_signs {
  date_of_vital_signs: String
  body_temperature: Float
  body_temperature_unit: String
  body_temperature_original: Float
  body_temperature_original_unit: String
  respiration_rate: Int
  respiration_rate_unit: String
  respiration_rate_original: Int
  respiration_rate_original_unit: String
  respiration_pattern: String
  pulse: Int
  pulse_unit: String
  pulse_original: Int
  pulse_original_unit: String
  pulse_ox: Float
  pulse_ox_unit: String
  pulse_ox_original: Float
  pulse_ox_original_unit: String
  systolic_bp: Int
  systolic_bp_unit: String
  systolic_bp_original: Int
  systolic_bp_original_unit: String
  ecg: String
  patient_weight: Float
  patient_weight_unit: String
  patient_weight_original: Float
  patient_weight_original_unit: String
  body_surface_area: Float
  body_surface_area_unit: String
  body_surface_area_original: Float
  body_surface_area_original_unit: String
  modified_ecog: String
  assessment_timepoint: String
  phase: String
  crdc_id: String
  visit: visit @relation(name:"on_visit", direction:OUT)
}

schema {
    query: QueryType
}

type BreedCaseCount {
    breed: String
    cases: Int
}

type CaseDetail {
    program_acronym: String
    clinical_study_name: String
    clinical_study_designation: String
    arm: String
    ctep_treatment_assignment_code: String
    cohort_description: String
    case_id: String
    patient_id: String
    patient_first_name: String
    breed: String
    sex: String
    patient_age_at_enrollment: Float
    neutered_indicator: String
    weight: Float
    site_short_name: String
    date_of_registration: String
    patient_subgroup: String
    date_of_informed_consent: String
    initials: String
    disease_term: String
    stage_of_disease: String
    best_response: String
    date_of_diagnosis: String
    primary_disease_site: String
    histological_grade: String
    histology_cytopathology: String
}

type Link {
    text: String
    url: String
}

type StudyOfProgram {
    program_id: String
    clinical_study_id: String
    clinical_study_designation: String
    clinical_study_name: String
    clinical_study_description: String
    clinical_study_type: String
    accession_id: String
    study_disposition: String
    date_of_iacuc_approval: String
    dates_of_conduct: String
    numberOfCases: Int
    numberOfStudyFiles: Int,
    numberOfCaseFiles: Int,
    numberOfImageCollections: Int,
    numberOfPublications: Int,
    numberOfCRDCNodes: Int
    CRDCLinks: [Link]
}

type FileOverview2 {
    parent:String
    file_name: String
    file_type: String
    file_description: String
    file_format: String
    file_size: Float
    md5sum: String
    file_status: String
    uuid: String
    file_location: String
}

type CaseOverview {
    case_id: String
    program: String
    study_code: String
    study_type: String
    breed: String
    diagnosis: String
    stage_of_disease: String
    age: Float
    sex: String
    neutered_status: String
    data_types: [String]
    disease_site: String
    samples: [String]
    sample_list: [sample]
    files: [FileOverview2]
    file_formats: [String]
    demographic: demographic
    diagnosis_obj: diagnosis
}


type FilesOfCase{
    case_id: String
    parent:String
    file_name: String
    file_type: String
    file_description: String
    file_format: String
    file_size: Float
    md5sum: String
    file_status: String
    uuid: String
    file_location: String
}

type StudyDetail {
    study_code: String
    file_name: String
    file_type: String
    association: String
    description: String
    format: String
    size: Float
    MD5: String
}

type FileDetail {
    clinical_study_designation: String
    clinical_study_name: String
    arm: String
    cohort_description: String
    cohort_dose: String
    case_id: String
    breed: String
    weight: Float
    sex: String
    neutered_indicator: String
    patient_age_at_enrollment: Float
    disease_term: String
    stage_of_disease: String
    primary_disease_site: String
    concurrent_disease: Boolean
    concurrent_disease_type: String
    visit_date: String
    visit_number: String
    day_in_cycle: Int
    sample_id: String
    sample_type: String
    general_sample_pathology: String
    specific_sample_pathology: String
    sample_site: String
    date_of_sample_collection: String
    necropsy_sample: Boolean
    percentage_tumor: String
    percentage_stroma: Float
    comment: String
    file_name: String
    file_type: String
    file_description: String
    file_format: String
    file_size: Float
    md5sum: String
    file_location: String
    uuid: String
    acl: String
    GUID: String
    md5: String
    size: Float
    url: String
}

type FileInfo {
    GUID: String
    md5: String
    size: Float
    acl: String
    url: String
}

type StudyStat {
    study_code: String
    files: Int
    total_size_MB: Float
    cases: Int
    samples: Int
}

type FileInList {
    file_name: String
    file_type: String
    association: String
    file_description: String
    file_format: String
    file_size: Float
    case_id: String
    breed: String
    diagnosis: String
    study_code: String
    file_uuid: String
    md5sum: String
    sample_id: String
    individual_id: String
    sample_site: String
    physical_sample_type: String
    general_sample_pathology: String
    tumor_sample_origin: String
    summarized_sample_type: String
    specific_sample_pathology: String
    date_of_sample_collection: String
    tumor_grade: String
    sample_chronology: String
    percentage_tumor: String
    necropsy_sample: String
    sample_preservation: String
    comment: String
    patient_age_at_enrollment: String
    sex: String
    neutered_indicator: String
    weight: String
    weight_unit: String
    disease_term: String
    primary_disease_site: String
    stage_of_disease: String
    date_of_diagnosis: String
    histology_cytopathology: String
    histological_grade: String
    best_response: String
    pathology_report: String
    treatment_data: String
    follow_up_data: String
    concurrent_disease: String
    concurrent_disease_type: String
    cohort_description: String
    arm: String
    other_cases: [String]
    name: String
    drs_uri: String
    file_location: String
    patient_id: String
    case_name: String
    cohort_dose: String
    cohort_id: String
    demographic_id: String
    additional_breed_detail: String
    date_of_birth: String
    diagnosis_id: String
    histology_date: String
    molecular_subtype: String
    tumor_length: String
    tumor_width: String
    tumor_volume: String
}

type FileOverview {
    file_name: String
    file_type: String
    association: String
    file_description: String
    file_format: String
    file_size: Float
    case_id: String
    breed: String
    diagnosis: String
    study_code: String
    file_uuid: String
    sample_id: String
    sample_site: String
    physical_sample_type: String
    general_sample_pathology: String
    tumor_sample_origin: String
    summarized_sample_type: String
    specific_sample_pathology: String
    date_of_sample_collection: String
    tumor_grade: String
    sample_chronology: String
    percentage_tumor: String
    necropsy_sample: String
    sample_preservation: String
    comment: String
    individual_id: String
    patient_age_at_enrollment: String
    sex: String
    neutered_indicator: String
    weight: String
    primary_disease_site: String
    stage_of_disease: String
    date_of_diagnosis: String
    histology_cytopathology: String
    histological_grade: String
    best_response: String
    pathology_report: String
    treatment_data: String
    follow_up_data: String
    concurrent_disease: String
    concurrent_disease_type: String
    cohort_description: String
    arm: String
    other_cases: [String]
}

type SampleOverview {
    sample_id: String
    case_id: String
    breed: String
    diagnosis: String
    sample_site: String
    sample_type: String
    sample_pathology: String
    tumor_grade: String
    sample_chronology: String
    percentage_tumor: String
    necropsy_sample: String
    sample_preservation: String
    files: [String]
    physical_sample_type: String
    general_sample_pathology: String
    tumor_sample_origin: String
    comment: String
    individual_id: String
    other_cases: [String]
    patient_age_at_enrollment: String
    sex: String
    neutered_indicator: String
    weight: String
    primary_disease_site: String
    stage_of_disease: String
    date_of_diagnosis: String
    histology_cytopathology: String
    histological_grade: String
    best_response: String
    pathology_report: String
    treatment_data: String
    follow_up_data: String
    concurrent_disease: String
    concurrent_disease_type: String
    cohort_description: String
    arm: String
}

type CaseOverview2 {
    case_id: String
    study_code: String
    study_type: String
    cohort: String
    breed: String
    diagnosis: String
    stage_of_disease: String
    age: Float
    sex: String
    neutered_status: String
    weight: Float
    response_to_treatment: String
    disease_site: String
    files: [String]
    other_cases: [String]
    individual_id: String
    primary_disease_site: String
    date_of_diagnosis: String
    histology_cytopathology: String
    histological_grade: String
    pathology_report: String
    treatment_data: String
    follow_up_data: String
    concurrent_disease: String
    concurrent_disease_type: String
    arm: String
}

type GroupCount {
    group: String
    count: Int
    code: String
}

type MultiStudyCases {
    individualId: String
    caseIds: [String]
    sampleIds: [String]
    fileIds: [String]
    studyFileIds: [String]
}

type UnifiedCounts{
    numberOfStudies: Int
    numberOfCases: Int
    numberOfFiles: Int
    numberOfSamples: Int
    numberOfStudyFiles: Int
    numberOfPrograms: Int
    numberOfAliquots: Int
    volumeOfData: Float
}

type ClinicalDataNodeCounts {
    agent: Int
    cycle: Int
    visit: Int
    follow_up: Int
    adverse_event: Int
    off_treatment: Int
    off_study: Int
    prior_therapy: Int
    prior_surgery: Int
    agent_administration: Int
    physical_exam: Int
    vital_signs: Int
    disease_extent: Int
    lab_exam: Int
}

type CycleNodeData {
    cycle_number: Int
    date_of_cycle_end: String
    crf_id: String
    case_id: String
    date_of_cycle_start: String
}

type VisitNodeData {
    case_id: String
    visit_date: String
    visit_number: Int
    visit_id: String
}

type FollowUpNodeData {
    document_number: String
    date_of_last_contact: String
    patient_status: String
    explain_unknown_status: String
    contact_type: String
    treatment_since_last_contact: Boolean
    physical_exam_performed: Boolean
    physical_exam_changes: Boolean
}

type AdverseEventNodeData {
    case_id: String
    day_in_cycle: Int
    dose_limiting_toxicity: String
    unexpected_adverse_event: String
    date_of_onset: String
    adverse_event_grade_description: String
    existing_adverse_event: String
    ongoing_adverse_event: String
    date_of_resolution: String
    attribution_to_ind: String
    attribution_to_research: String
    adverse_event_term: String
    attribution_to_commercial: String
    adverse_event_agent_dose: String
    attribution_to_other: String
    adverse_event_agent_name: String
    attribution_to_disease: String
    adverse_event_description: String
    adverse_event_grade: String
    other_attribution_description: String
}

type OffTreatmentNodeData {
    document_number: String
    date_off_treatment: String
    reason_off_treatment: String
    date_of_disease_progression: String
    best_resp_vet_tx_tp_secondary_response: String
    date_last_medication_administration: String
    best_resp_vet_tx_tp_best_response: String
    date_of_best_response: String
}

type OffStudyNodeData {
    document_number: String
    date_off_study: String
    reason_off_study: String
    date_of_disease_progression: String
    date_off_treatment: String
    best_resp_vet_tx_tp_secondary_response: String
    date_last_medication_administration: String
    best_resp_vet_tx_tp_best_response: String
    date_of_best_response: String
}

type PriorTherapyNodeData {
    date_of_first_dose: String
    date_of_last_dose: String
    agent_name: String
    dose_schedule: String
    total_dose: Float
    agent_units_of_measure: String
    best_response_to_prior_therapy: String
    nonresponse_therapy_type: String
    prior_therapy_type: String
    prior_steroid_exposure: Boolean
    number_of_prior_regimens_steroid: Int
    total_number_of_doses_steroid: Int
    date_of_last_dose_steroid: String
    prior_nsaid_exposure: Boolean
    number_of_prior_regimens_nsaid: Int
    total_number_of_doses_nsaid: Int
    date_of_last_dose_nsaid: String
    tx_loc_geo_loc_ind_nsaid: String
    min_rsdl_dz_tx_ind_nsaids_treatment_pe: String
    therapy_type: String
    any_therapy: Boolean
    number_of_prior_regimens_any_therapy: Int
    total_number_of_doses_any_therapy: Int
    date_of_last_dose_any_therapy: String
    treatment_performed_at_site: Boolean
    treatment_performed_in_minimal_residual: Boolean
}

type PriorSurgeryNodeData {
    case_id: String
    date_of_surgery: String
    procedure: String
    anatomical_site_of_surgery: String
    surgical_finding: String
    residual_disease: String
    therapeutic_indicator: String
}

type PhysicalExamNodeData {
    case_id: String
    date_of_examination: String
    day_in_cycle: Int
    body_system: String
    pe_finding: String
    pe_comment: String
    phase_pe: Int
    assessment_timepoint: Int
}

type AgentNodeData {
    medication: String
    document_number: String
}

type DiseaseExtentNodeData {
    case_id: String
    lesion_number: Int
    lesion_site: String
    lesion_description: String
    previously_irradiated: String
    previously_treated: String
    measurable_lesion: String
    target_lesion: String
    date_of_evaluation: String
    measured_how: String
    longest_measurement: String
    evaluation_number: String
    evaluation_code: String
}

type AgentAdministrationNodeData {
    document_number: String
    medication: String
    route_of_administration: String
    medication_lot_number: String
    medication_vial_id: String
    medication_actual_units_of_measure: String
    medication_duration: Float
    medication_units_of_measure: String
    medication_actual_dose: Float
    phase: String
    start_time: String
    stop_time: String
    dose_level: Float
    dose_units_of_measure: String
    date_of_missed_dose: String
    medication_missed_dose: String
    missed_dose_amount: Float
    missed_dose_units_of_measure: String
    medication_course_number: String
    comment: String
}

type VitalSignsNodeData {
    body_temperature_unit: String
    systolic_bp_unit: String
    respiration_pattern: String
    pulse_ox_original_unit: String
    body_surface_area: Float
    patient_weight_original_unit: String
    body_surface_area_unit: String
    systolic_bp_original_unit: String
    body_surface_area_original_unit: String
    patient_weight: Float
    patient_weight_unit: String
    case_id: String
    time_of_observation: String
    pulse_original_unit: String
    respiration_rate_original_unit: String
    body_temperature_original_unit: String
    body_surface_area_original: Float
    pulse_original: Int
    date_of_vital_signs: String
    pulse_ox_unit: String
    modified_ecog: String
    respiration_rate_unit: String,
    patient_weight_original: Float
    pulse_unit: String
    body_temperature: Float
    pulse: Int
    body_temperature_original: Float
}

# type LabExamNodeData {

# }

type PriorSurgeryNodeDataOverview {
  case_count: Int
  prior_surgeries: [PriorSurgeryNodeData]
}

type CartChartItem {
    label: String
    value: Int
}

type CartChartData {
    fileType: [CartChartItem]
    fileFormat: [CartChartItem]
    fileAssociation: [CartChartItem]
}

type CartOverviewData {
    totalNumberOfFiles: Int
    studiesInCart: [String]
    totalNumberOfCases: Int
    charts: CartChartData
}

type HumanRelevanceNodeData {
    human_relevance_record_id: String
    human_relevance_statement: String
    relevant_human_cancer: [String]
    relevant_experimental_therapeutic_intervention: [String]
    relevant_human_genes: [String]
    relevant_human_pathways: [String]
    nci_link_to_relevant_human_cancer: String
}

type QueryType {
    "Version"
    schemaVersion: String @cypher(statement: "RETURN '2.0.0'")

    "Simple count"
    numberOfStudies: Int @cypher(statement: "MATCH (n:study) WHERE n.study_disposition = 'Unrestricted' RETURN  count (n)")
    numberOfCases: Int @cypher(statement: "MATCH (n:case) RETURN  count (n)")
    numberOfSamples:Int @cypher(statement: "MATCH (n:sample) RETURN  count (n)")
    numberOfFiles: Int @cypher(statement: "MATCH (n:file) RETURN  count (n)")
    numberOfStudyFiles: Int @cypher(statement: "MATCH (n:file)-->(sd:study) RETURN count (n)")
    numberOfPrograms: Int @cypher(statement: "MATCH (n:program) RETURN count (n)")
    numberOfAliquots: Int @cypher(statement: "MATCH (n:aliquot) return count(n)")
    volumeOfData: Float @cypher(statement: "MATCH (f:file) WITH DISTINCT f return sum(f.file_size)")
    volumeOfDataOfCase(case_id: String!): Float @cypher(statement: "MATCH (c:case{case_id: $case_id})-->(s:study) WITH s OPTIONAL MATCH (s)<--(f:file) WITH SUM(f.file_size) AS study_file_size OPTIONAL MATCH (c:case{case_id: $case_id})<-[*]-(f:file) with DISTINCT f, study_file_size RETURN SUM(f.file_size) + study_file_size")
    volumeOfDataOfProgram(program_id: String!): Float @cypher(statement: "MATCH (f:file)-[*]->(:program {program_acronym: $program_id}) WITH DISTINCT f return sum(f.file_size)")
    volumeOfDataOfStudy(study_code: String!): Float @cypher(statement: "MATCH (f:file)-[*]->(:study {clinical_study_designation: $study_code}) WITH DISTINCT f return sum(f.file_size)")


    "Count with parameter"
    sampleCountOfStudy(study_code: String!): Int @cypher(statement: "MATCH (s:sample)-[*]->(sd:study) WHERE sd.clinical_study_designation = $study_code OR sd.accession_id = $study_code return count(DISTINCT(s))")
    fileCountOfStudy(study_code: String!): Int @cypher(statement: "MATCH (f:file)-[*]->(sd:study) WHERE sd.clinical_study_designation = $study_code OR sd.accession_id = $study_code return count(distinct(f))")
    fileCountOfStudyFiles(study_code: String!): Int @cypher(statement: "MATCH (f:file)-->(sd:study) WHERE sd.clinical_study_designation = $study_code OR sd.accession_id = $study_code return count(distinct(f))")
    aliquotCountOfStudy(study_code: String!): Int @cypher(statement: "MATCH (a:aliquot)-[*]->(sd:study) WHERE sd.clinical_study_designation = $study_code OR sd.accession_id = $study_code  return count(DISTINCT(a))")
    caseCountOfStudy(study_code: String!): Int @cypher(statement: "MATCH (c:case)-[*]->(sd:study) WHERE sd.clinical_study_designation = $study_code OR sd.accession_id = $study_code return count(distinct(c))")
    fileCountOfCase(case_id: String!): Int @cypher(statement: "MATCH (f:file)-[*]->(c:case {case_id: $case_id}) return count(DISTINCT(f))")
    studyFileCountOfCase(case_id: String!): Int @cypher(statement: "MATCH (c:case {case_id: $case_id}) OPTIONAL MATCH (c)-[:member_of]->(s:study) OPTIONAL MATCH (s)<--(f:file) return count(DISTINCT(f))")
    aliquotCountOfCase(case_id: String!): Int @cypher(statement: "MATCH (a:aliquot)-[*]->(c:case {case_id: $case_id}) return count(DISTINCT(a))")
    sampleCountOfProgram(program_id: String!): Int @cypher(statement: "MATCH (s:sample)-[*]->(:program {program_acronym: $program_id}) return count(DISTINCT(s))")
    fileCountOfProgram(program_id: String!): Int @cypher(statement: "MATCH (f:file)-[*]->(:program {program_acronym: $program_id}) return count(DISTINCT(f))")
    studyFileCountOfProgram(program_id: String!): Int @cypher(statement: "MATCH (s:study)-[*]->(:program {program_acronym: $program_id}) OPTIONAL MATCH (s) <-- (f:file) return count(DISTINCT(f))")
    aliquotCountOfProgram(program_id: String!): Int @cypher(statement: "MATCH (a:aliquot)-[*]->(:program {program_acronym: $program_id}) return count(DISTINCT(a))")
    studyCountOfProgram(program_id: String!): Int @cypher(statement: "MATCH (s:study)-[*]->(:program {program_acronym: $program_id}) WHERE s.study_disposition = 'Unrestricted' return count(DISTINCT(s))")
    caseCountOfProgram(program_id: String!): Int @cypher(statement: "MATCH (c:case)-[*]->(:program {program_acronym: $program_id}) return count(DISTINCT(c))")
    sampleCountOfCase(case_id: String!): Int @cypher(statement: "MATCH (c:case {case_id: $case_id})<-[*]-(s:sample) RETURN count(distinct(s))")

    programCountOfStudy(study_code: String!): Int @cypher(statement: "MATCH (s:study {clinical_study_designation: $study_code}) OPTIONAL MATCH (s)-[:member_of]->(p: program)  return count(DISTINCT(p))")
    programsCountOfCase(case_id: String!): Int @cypher(statement: "MATCH (c:case {case_id: $case_id}) OPTIONAL MATCH (c)-[:member_of]->(s:study) OPTIONAL MATCH (s)-[:member_of]->(p:program) return count(DISTINCT(p))")

    filesInList(uuids: [String], order_by: String = ""): [FileInList] @cypher(statement: """
    MATCH (f:file)
    WHERE f.uuid in $uuids
    OPTIONAL MATCH (f)-->(parent)
    OPTIONAL MATCH (f)-[*]->(samp:sample)
    OPTIONAL MATCH (f:file)-[*]->(c:case)
    OPTIONAL MATCH (diag:diagnosis)-[:of_case]->(c)
    OPTIONAL MATCH (demo:demographic)-[:of_case]->(c)
    OPTIONAL MATCH (enroll:enrollment)-[:of_case]->(c)
    OPTIONAL MATCH (samp:sample)-[:of_case]->(c)
    OPTIONAL MATCH (s:study)<-[:member_of]-(c)
    OPTIONAL MATCH (c)-->(i:canine_individual)<--(o:case)
    OPTIONAL MATCH (c)-->(co:cohort)
    OPTIONAL MATCH (co)-->(a:study_arm)
    WITH
    f.file_name AS file_name,
    f.file_type AS file_type,
    head(labels(parent)) AS association,
    f.file_description AS file_description,
    f.file_format AS file_format,
    f.file_size AS file_size,
    c.case_id AS case_id,
    demo.breed AS breed,
    diag.disease_term AS diagnosis,
    CASE WHEN s.clinical_study_designation IS NULL
    THEN parent.clinical_study_designation
    ELSE s.clinical_study_designation END AS study_code,
    f.uuid AS file_uuid,
    f.md5sum AS md5sum,
    samp.sample_id AS sample_id,
    i.canine_individual_id AS individual_id,
    samp.sample_site AS sample_site,
    samp.physical_sample_type AS physical_sample_type,
    samp.general_sample_pathology AS general_sample_pathology,
    samp.tumor_sample_origin AS tumor_sample_origin,
    samp.summarized_sample_type AS summarized_sample_type,
    samp.specific_sample_pathology AS specific_sample_pathology,
    samp.date_of_sample_collection AS date_of_sample_collection,
    samp.tumor_grade AS tumor_grade,
    samp.sample_chronology AS sample_chronology,
    samp.percentage_tumor AS percentage_tumor,
    samp.necropsy_sample AS necropsy_sample,
    samp.sample_preservation AS sample_preservation,
    samp.comment AS comment,
    demo.patient_age_at_enrollment AS patient_age_at_enrollment,
    demo.sex AS sex,
    demo.neutered_indicator AS neutered_indicator,
    demo.weight AS weight,
    demo.weight_unit AS weight_unit,
    diag.disease_term AS disease_term,
    diag.primary_disease_site AS primary_disease_site,
    diag.stage_of_disease AS stage_of_disease,
    diag.date_of_diagnosis AS date_of_diagnosis,
    diag.histology_cytopathology AS histology_cytopathology,
    diag.histological_grade AS histological_grade,
    diag.best_response AS best_response,
    diag.pathology_report AS pathology_report,
    diag.treatment_data AS treatment_data,
    diag.follow_up_data AS follow_up_data,
    diag.concurrent_disease AS concurrent_disease,
    diag.concurrent_disease_type AS concurrent_disease_type,
    co.cohort_description AS cohort_description,
    a.arm AS arm,
    collect(DISTINCT o.case_id) AS other_cases,
    'drs://nci-crdc.datacommons.io/dg.4DFC/' AS drs_prefix,
    f.file_location AS file_location,
    c.patient_id AS patient_id,
    c.patient_first_name AS patient_first_name,
    samp.molecular_subtype AS molecular_subtype,
    samp.length_of_tumor AS length_of_tumor,
    samp.width_of_tumor AS width_of_tumor,
    samp.volume_of_tumor AS volume_of_tumor,
    demo.demographic_id AS demographic_id,
    demo.additional_breed_detail AS additional_breed_detail,
    demo.date_of_birth AS date_of_birth,
    diag.date_of_histology_confirmation AS date_of_histology_confirmation,
    co.cohort_dose AS cohort_dose,
    co.cohort_id AS cohort_id,
    diag.diagnosis_id AS diagnosis_id
    RETURN {
    file_name: file_name,
    file_type: file_type,
    association: association,
    file_description: file_description,
    file_format: file_format,
    file_size: file_size,
    case_id: case_id,
    breed: breed,
    diagnosis: diagnosis,
    study_code: study_code,
    file_uuid: file_uuid,
    md5sum: md5sum,
    sample_id: sample_id,
    individual_id: individual_id,
    sample_site: sample_site,
    physical_sample_type: physical_sample_type,
    general_sample_pathology: general_sample_pathology,
    tumor_sample_origin: tumor_sample_origin,
    summarized_sample_type: summarized_sample_type,
    specific_sample_pathology: specific_sample_pathology,
    date_of_sample_collection: date_of_sample_collection,
    tumor_grade: tumor_grade,
    sample_chronology: sample_chronology,
    percentage_tumor: percentage_tumor,
    necropsy_sample: necropsy_sample,
    sample_preservation: sample_preservation,
    comment: comment,
    patient_age_at_enrollment: patient_age_at_enrollment,
    sex: sex,
    neutered_indicator: neutered_indicator,
    weight: weight,
    weight_unit: weight_unit,
    disease_term: disease_term,
    primary_disease_site: primary_disease_site,
    stage_of_disease: stage_of_disease,
    date_of_diagnosis: date_of_diagnosis,
    histology_cytopathology: histology_cytopathology,
    histological_grade: histological_grade,
    best_response: best_response,
    pathology_report: pathology_report,
    treatment_data: treatment_data,
    follow_up_data: follow_up_data,
    concurrent_disease: concurrent_disease,
    concurrent_disease_type: concurrent_disease_type,
    cohort_description: cohort_description,
    arm: arm,
    other_cases: other_cases,
    name: file_name,
    drs_uri: drs_prefix + file_uuid,
    file_location: file_location,
    patient_id: patient_id,
    case_name: patient_first_name,
    cohort_dose: cohort_dose,
    cohort_id: cohort_id,
    demographic_id: demographic_id,
    additional_breed_detail: additional_breed_detail,
    date_of_birth: date_of_birth,
    diagnosis_id: diagnosis_id,
    histology_date: date_of_histology_confirmation,
    molecular_subtype: molecular_subtype,
    tumor_length: length_of_tumor,
    tumor_width: width_of_tumor,
    tumor_volume: volume_of_tumor
    }
    ORDER BY CASE $order_by
    WHEN 'file_name' THEN file_name
    WHEN 'file_type' THEN file_type
    WHEN 'association' THEN association
    WHEN 'file_description' THEN file_description
    WHEN 'file_format' THEN file_format
    WHEN 'file_size' THEN file_size
    WHEN 'case_id' THEN case_id
    WHEN 'breed' THEN breed
    WHEN 'diagnosis' THEN diagnosis
    WHEN 'study_code' THEN study_code
    WHEN 'file_uuid' THEN file_uuid
    WHEN 'md5sum' THEN md5sum
    WHEN 'individual_id' THEN individual_id
    WHEN 'access_file' THEN (CASE file_size < 12000000 WHEN TRUE THEN 0 ELSE 1 END)
    WHEN 'sample_id' THEN sample_id
    ELSE file_name END
    """, passThrough: true)

    filesInListDesc(uuids: [String], order_by: String = ""): [FileInList] @cypher(statement: """
    MATCH (f:file)
    WHERE f.uuid in $uuids
    OPTIONAL MATCH (f)-->(parent)
    OPTIONAL MATCH (f)-[*]->(samp:sample)
    OPTIONAL MATCH (f:file)-[*]->(c:case)
    OPTIONAL MATCH (diag:diagnosis)-[:of_case]->(c)
    OPTIONAL MATCH (demo:demographic)-[:of_case]->(c)
    OPTIONAL MATCH (enroll:enrollment)-[:of_case]->(c)
    OPTIONAL MATCH (samp:sample)-[:of_case]->(c)
    OPTIONAL MATCH (s:study)<-[:member_of]-(c)
    OPTIONAL MATCH (c)-->(i:canine_individual)<--(o:case)
    OPTIONAL MATCH (c)-->(co:cohort)
    OPTIONAL MATCH (co)-->(a:study_arm)
    WITH
    f.file_name AS file_name,
    f.file_type AS file_type,
    head(labels(parent)) AS association,
    f.file_description AS file_description,
    f.file_format AS file_format,
    f.file_size AS file_size,
    c.case_id AS case_id,
    demo.breed AS breed,
    diag.disease_term AS diagnosis,
    CASE WHEN s.clinical_study_designation IS NULL
    THEN parent.clinical_study_designation
    ELSE s.clinical_study_designation END AS study_code,
    f.uuid AS file_uuid,
    f.md5sum AS md5sum,
    samp.sample_id AS sample_id,
    i.canine_individual_id AS individual_id,
    samp.sample_site AS sample_site,
    samp.physical_sample_type AS physical_sample_type,
    samp.general_sample_pathology AS general_sample_pathology,
    samp.tumor_sample_origin AS tumor_sample_origin,
    samp.summarized_sample_type AS summarized_sample_type,
    samp.specific_sample_pathology AS specific_sample_pathology,
    samp.date_of_sample_collection AS date_of_sample_collection,
    samp.tumor_grade AS tumor_grade,
    samp.sample_chronology AS sample_chronology,
    samp.percentage_tumor AS percentage_tumor,
    samp.necropsy_sample AS necropsy_sample,
    samp.sample_preservation AS sample_preservation,
    samp.comment AS comment,
    demo.patient_age_at_enrollment AS patient_age_at_enrollment,
    demo.sex AS sex,
    demo.neutered_indicator AS neutered_indicator,
    demo.weight AS weight,
    demo.weight_unit AS weight_unit,
    diag.disease_term AS disease_term,
    diag.primary_disease_site AS primary_disease_site,
    diag.stage_of_disease AS stage_of_disease,
    diag.date_of_diagnosis AS date_of_diagnosis,
    diag.histology_cytopathology AS histology_cytopathology,
    diag.histological_grade AS histological_grade,
    diag.best_response AS best_response,
    diag.pathology_report AS pathology_report,
    diag.treatment_data AS treatment_data,
    diag.follow_up_data AS follow_up_data,
    diag.concurrent_disease AS concurrent_disease,
    diag.concurrent_disease_type AS concurrent_disease_type,
    co.cohort_description AS cohort_description,
    a.arm AS arm,
    collect(DISTINCT o.case_id) AS other_cases,
    'drs://nci-crdc.datacommons.io/dg.4DFC/' AS drs_prefix,
    f.file_location AS file_location,
    c.patient_id AS patient_id,
    c.patient_first_name AS patient_first_name,
    samp.molecular_subtype AS molecular_subtype,
    samp.length_of_tumor AS length_of_tumor,
    samp.width_of_tumor AS width_of_tumor,
    samp.volume_of_tumor AS volume_of_tumor,
    demo.demographic_id AS demographic_id,
    demo.additional_breed_detail AS additional_breed_detail,
    demo.date_of_birth AS date_of_birth,
    diag.date_of_histology_confirmation AS date_of_histology_confirmation,
    co.cohort_dose AS cohort_dose,
    co.cohort_id AS cohort_id,
    diag.diagnosis_id AS diagnosis_id
    RETURN {
    file_name: file_name,
    file_type: file_type,
    association: association,
    file_description: file_description,
    file_format: file_format,
    file_size: file_size,
    case_id: case_id,
    breed: breed,
    diagnosis: diagnosis,
    study_code: study_code,
    file_uuid: file_uuid,
    md5sum: md5sum,
    sample_id: sample_id,
    individual_id: individual_id,
    sample_site: sample_site,
    physical_sample_type: physical_sample_type,
    general_sample_pathology: general_sample_pathology,
    tumor_sample_origin: tumor_sample_origin,
    summarized_sample_type: summarized_sample_type,
    specific_sample_pathology: specific_sample_pathology,
    date_of_sample_collection: date_of_sample_collection,
    tumor_grade: tumor_grade,
    sample_chronology: sample_chronology,
    percentage_tumor: percentage_tumor,
    necropsy_sample: necropsy_sample,
    sample_preservation: sample_preservation,
    comment: comment,
    patient_age_at_enrollment: patient_age_at_enrollment,
    sex: sex,
    neutered_indicator: neutered_indicator,
    weight: weight,
    weight_unit: weight_unit,
    disease_term: disease_term,
    primary_disease_site: primary_disease_site,
    stage_of_disease: stage_of_disease,
    date_of_diagnosis: date_of_diagnosis,
    histology_cytopathology: histology_cytopathology,
    histological_grade: histological_grade,
    best_response: best_response,
    pathology_report: pathology_report,
    treatment_data: treatment_data,
    follow_up_data: follow_up_data,
    concurrent_disease: concurrent_disease,
    concurrent_disease_type: concurrent_disease_type,
    cohort_description: cohort_description,
    arm: arm,
    other_cases: other_cases,
    name: file_name,
    drs_uri: drs_prefix + file_uuid,
    file_location: file_location,
    patient_id: patient_id,
    case_name: patient_first_name,
    cohort_dose: cohort_dose,
    cohort_id: cohort_id,
    demographic_id: demographic_id,
    additional_breed_detail: additional_breed_detail,
    date_of_birth: date_of_birth,
    diagnosis_id: diagnosis_id,
    histology_date: date_of_histology_confirmation,
    molecular_subtype: molecular_subtype,
    tumor_length: length_of_tumor,
    tumor_width: width_of_tumor,
    tumor_volume: volume_of_tumor
    }
    ORDER BY CASE $order_by
    WHEN 'file_name' THEN file_name
    WHEN 'file_type' THEN file_type
    WHEN 'association' THEN association
    WHEN 'file_description' THEN file_description
    WHEN 'file_format' THEN file_format
    WHEN 'file_size' THEN file_size
    WHEN 'case_id' THEN case_id
    WHEN 'breed' THEN breed
    WHEN 'diagnosis' THEN diagnosis
    WHEN 'study_code' THEN study_code
    WHEN 'file_uuid' THEN file_uuid
    WHEN 'md5sum' THEN md5sum
    WHEN 'individual_id' THEN individual_id
    WHEN 'access_file' THEN (CASE file_size > 12000000 WHEN TRUE THEN 1 ELSE 0 END)
    WHEN 'sample_id' THEN sample_id
    ELSE file_name END DESC
    """, passThrough: true)

    "Combined info"
    studiesByProgramId(program_id: String!): [StudyOfProgram] @cypher(statement: """
    MATCH (p:program {program_acronym: $program_id})<-[*]-(s:study)
    OPTIONAL MATCH (s)<-[*]-(c:case)
    OPTIONAL MATCH (s)<--(sf:file)
    OPTIONAL MATCH (s)<--(ic:image_collection)
    OPTIONAL MATCH (s)<--(pub:publication)
    OPTIONAL MATCH (c)<-[*]-(cf:file)
    WITH p, s,
    COUNT(DISTINCT sf) AS numberOfStudyFiles,
    COUNT(DISTINCT cf) AS numberOfCaseFiles,
    COUNT(DISTINCT ic) AS numberOfImageCollections,
    COUNT(DISTINCT ic.repository_name) AS numberOfCRDCNodes,
    COUNT(DISTINCT pub) AS numberOfPublications,
    COUNT(DISTINCT(c)) AS numberOfCases,
    COLLECT(DISTINCT ic{text: ic.image_collection_name + ' - ' + ic.repository_name,
    url: ic.image_collection_url}) AS CRDCLinks
    RETURN{
    program_id: p.program_acronym,
    clinical_study_id: s.clinical_study_id,
    clinical_study_designation: s.clinical_study_designation,
    clinical_study_name: s.clinical_study_name,
    clinical_study_description: s.clinical_study_description,
    clinical_study_type: s.clinical_study_type,
    accession_id: s.accession_id,
    study_disposition: s.study_disposition,
    date_of_iacuc_approval: s.date_of_iacuc_approval,
    dates_of_conduct: s.dates_of_conduct,
    numberOfCases: numberOfCases,
    numberOfStudyFiles: numberOfStudyFiles,
    numberOfCaseFiles: numberOfCaseFiles,
    numberOfImageCollections: numberOfImageCollections,
    numberOfPublications: numberOfPublications,
    numberOfCRDCNodes: numberOfCRDCNodes,
    CRDCLinks: CRDCLinks
    }
    ORDER BY s.clinical_study_designation
    """, passThrough: true)

    studiesByProgram: [StudyOfProgram] @cypher(statement:"""
    MATCH (s:study)
    OPTIONAL MATCH (p:program)<-[*]-(s)
    OPTIONAL MATCH (s)<-[*]-(c:case)
    OPTIONAL MATCH (s)<--(sf:file)
    OPTIONAL MATCH (s)<--(ic:image_collection)
    OPTIONAL MATCH (s)<--(pub:publication)
    OPTIONAL MATCH (c)<-[*]-(cf:file)
    WITH p, s,
    COUNT(DISTINCT sf) AS numberOfStudyFiles,
    COUNT(DISTINCT cf) AS numberOfCaseFiles,
    COUNT(DISTINCT ic) AS numberOfImageCollections,
    COUNT(DISTINCT ic.repository_name) AS numberOfCRDCNodes,
    COUNT(DISTINCT pub) AS numberOfPublications,
    COUNT(DISTINCT(c)) AS numberOfCases,
    COLLECT(DISTINCT ic{text: ic.image_collection_name + ' - ' + ic.repository_name,
    url: ic.image_collection_url}) AS CRDCLinks
    RETURN{
    program_id: p.program_acronym,
    clinical_study_id: s.clinical_study_id,
    clinical_study_designation: s.clinical_study_designation,
    clinical_study_name: s.clinical_study_name,
    clinical_study_description: s.clinical_study_description,
    clinical_study_type: s.clinical_study_type,
    accession_id: s.accession_id,
    study_disposition: s.study_disposition,
    date_of_iacuc_approval: s.date_of_iacuc_approval,
    dates_of_conduct: s.dates_of_conduct,
    numberOfCases: numberOfCases,
    numberOfStudyFiles: numberOfStudyFiles,
    numberOfCaseFiles: numberOfCaseFiles,
    numberOfImageCollections: numberOfImageCollections,
    numberOfPublications: numberOfPublications,
    numberOfCRDCNodes: numberOfCRDCNodes,
    CRDCLinks: CRDCLinks
    }
    ORDER BY s.clinical_study_designation
    """, passThrough: true)

    filesOfCase(case_id: String!): [FilesOfCase] @cypher(statement: """
    MATCH (f:file)-[*]->(c:case{case_id: $case_id})
    WITH DISTINCT(f) AS f
    MATCH (f)-->(parent)
    RETURN{
    file_status: f.file_status,
    file_name: f.file_name,
    file_type: f.file_type,
    file_description: f.file_description,
    file_format: f.file_format,
    file_size: f.file_size,
    md5sum: f.md5sum,
    uuid: f.uuid,
    file_location: f.file_location,
    parent: head(labels(parent)),
    case_id: $case_id
    }
    """, passThrough: true)

    filesOfCases(case_ids: [String!]!): [FilesOfCase] @cypher(statement: """
    MATCH (f:file)-[*]->(c:case)
    WITH
    DISTINCT(f) AS f,
    c MATCH (f)-->(parent)
    WHERE c.case_id IN $case_ids
    RETURN{
    file_status: f.file_status,
    file_name: f.file_name,
    file_type: f.file_type,
    file_description: f.file_description,
    file_format: f.file_format,
    file_size: f.file_size,
    md5sum: f.md5sum,
    uuid: f.uuid,
    file_location: f.file_location,
    parent: head(labels(parent)),
    case_id: c.case_id
    }
    """, passThrough: true)

    multiStudyCases(case_id: String): MultiStudyCases @cypher(statement: """
    MATCH (:case {case_id: $case_id})-->(i:canine_individual)
    MATCH (i)<--(c:case)
    OPTIONAL MATCH (c)<--(samp:sample)
    OPTIONAL MATCH (c)<-[*]-(f:file)
    OPTIONAL MATCH (c) -[:member_of]->(s:study)
    OPTIONAL MATCH (sf:file)-->(s)
    WITH i, c, f, samp, sf
    RETURN{
    individualId: i.canine_individual_id,
    caseIds: collect(DISTINCT c.case_id),
    sampleIds: collect(DISTINCT samp.sample_id),
    fileIds: collect(DISTINCT f.uuid),
    studyFileIds: collect(DISTINCT sf.uuid)
    }
    """, passThrough: true)

    caseDetail(case_id: String): CaseDetail @cypher(statement: """
    MATCH (c:case {case_id: $case_id})-->(s:study)-->(p:program)
    OPTIONAL MATCH (c)-->(co:cohort)-->(a:study_arm)
    OPTIONAL MATCH (c)<--(demo:demographic)
    OPTIONAL MATCH (c)<--(diag:diagnosis)
    OPTIONAL MATCH (c)<--(e:enrollment)
    RETURN{
    program_acronym: p.program_acronym,
    clinical_study_name: s.clinical_study_name,
    clinical_study_designation: s.clinical_study_designation,
    arm: a.arm,
    ctep_treatment_assignment_code: a.ctep_treatment_assignment_code,
    cohort_description: co.cohort_description,
    case_id: c.case_id,
    patient_id: c.patient_id,
    patient_first_name: c.patient_first_name,
    breed: demo.breed,
    sex: demo.sex,
    patient_age_at_enrollment: demo.patient_age_at_enrollment,
    neutered_indicator: demo.neutered_indicator,
    weight: demo.weight,
    site_short_name: e.site_short_name,
    date_of_registration: e.date_of_registration,
    patient_subgroup: e.patient_subgroup,
    date_of_informed_consent: e.date_of_informed_consent,
    initials: e.initials,
    disease_term: diag.disease_term,
    stage_of_disease: diag.stage_of_disease,
    best_response: diag.best_response,
    date_of_diagnosis: diag.date_of_diagnosis,
    primary_disease_site: diag.primary_disease_site,
    histological_grade: diag.histological_grade,
    histology_cytopathology: diag.histology_cytopathology
    }
    """, passThrough: true)

    caseOverview(study_codes: [String] = [""], breeds: [String] = [""], diagnoses: [String] = [""], sexes: [String] = [""]): [CaseOverview] @cypher(statement: """
    MATCH (s:study)
    WITH collect(DISTINCT(s.clinical_study_designation)) AS all_studies
    MATCH (d:demographic)
    WITH collect(DISTINCT(d.breed)) AS all_breeds, collect(DISTINCT(d.sex)) AS all_sexes, all_studies
    MATCH (d:diagnosis)
    WITH collect(DISTINCT(d.disease_term)) AS all_diseases, all_breeds, all_sexes, all_studies
    MATCH (p:program)<-[*]-(s:study)<-[*]-(c:case)<--(demo:demographic), (c)<--(diag:diagnosis)
    WHERE
    s.clinical_study_designation IN
    CASE
    WHEN ($study_codes = [""] OR $study_codes IS NULL)
    THEN all_studies
    ELSE $study_codes
    END
    AND
    demo.breed IN
    CASE
    WHEN ($breeds = [""] OR $breeds IS NULL)
    THEN all_breeds
    ELSE $breeds
    END
    AND
    diag.disease_term IN
    CASE
    WHEN ($diagnoses = [""] OR $diagnoses IS NULL)
    THEN all_diseases
    ELSE $diagnoses
    END
    AND
    demo.sex IN
    CASE
    WHEN ($sexes = [""] OR $sexes IS NULL)
    THEN all_sexes
    ELSE $sexes
    END
    OPTIONAL MATCH (f:file)-[*]->(c)
    OPTIONAL MATCH (f)-->(prt)
    OPTIONAL MATCH (samp:sample)-[*]->(c)
    WITH DISTINCT c AS c, p, s, demo, diag, f, samp, prt
    RETURN{
    case_id: c.case_id,
    study_code: s.clinical_study_designation,
    program: p.program_acronym,
    study_type: s.clinical_study_type,
    breed: demo.breed,
    diagnosis: diag.disease_term,
    stage_of_disease: diag.stage_of_disease,
    disease_site: diag.primary_disease_site,
    age: demo.patient_age_at_enrollment,
    sex: demo.sex,
    neutered_status: demo.neutered_indicator,
    data_types: collect(DISTINCT(f.file_type)),
    file_formats: collect(DISTINCT(f.file_format)),
    files: collect(DISTINCT(f {parent:labels(prt)[0], .file_name, .file_name, .file_type, .file_description, .file_format, .file_size, .md5sum, .file_status, .uuid, .file_location})),
    samples: collect(DISTINCT(samp.sample_id)),
    sample_list: collect(DISTINCT(samp{.*})),
    demographic: demo,
    diagnosis_obj: diag
    }
    """, passThrough: true)

    casesInList(case_ids: [String!]!): [CaseOverview] @cypher(statement: """
    MATCH
    (p:program)<-[*]-(s:study)<-[*]-(c:case)<--(demo:demographic),
    (c)<--(diag:diagnosis)
    WHERE c.case_id IN $case_ids
    OPTIONAL MATCH (f:file)-[*]->(c)
    OPTIONAL MATCH (samp:sample)-[*]->(c)
    WITH DISTINCT c AS c, p, s, demo, diag, f, samp
    RETURN{
    case_id: c.case_id,
    study_code: s.clinical_study_designation,
    program: p.program_acronym,
    study_type: s.clinical_study_type,
    breed: demo.breed,
    diagnosis: diag.disease_term,
    stage_of_disease: diag.stage_of_disease,
    disease_site: diag.primary_disease_site,
    age: demo.patient_age_at_enrollment,
    sex: demo.sex,
    neutered_status: demo.neutered_indicator,
    data_types: collect(DISTINCT(f.file_type)),
    file_formats: collect(DISTINCT(f.file_format)),
    files: collect(DISTINCT(f{.*})),
    samples: collect(DISTINCT(samp.sample_id)),
    sample_list: collect(DISTINCT(samp{.*}))
    }
    """, passThrough:true)

    studyDetail(study_code: String!): [StudyDetail] @cypher(statement: """
    MATCH (s:study {clinical_study_designation: $study_code})<-[*]-(p)<--(f:file)
    WITH DISTINCT(f), s, p
    RETURN{
    study_code: s.clinical_study_designation,
    file_name: f.file_name,
    file_type: f.file_type,
    association: head(labels(p)),
    description: f.file_description,
    format: f.file_format,
    size: f.file_size,
    MD5: f.md5sum
    }
    """, passThrough: true)

    "Find nodes with parameters"
    casesByStudyId(study_id: String!): [case] @cypher(statement: """
    MATCH (s:study {clinical_study_designation: $study_id})<-[*]-(c:case)
    RETURN DISTINCT(c)
    """)

    samplesByCaseId(case_id: String!): [sample] @cypher(statement: """
    MATCH (c:case {case_id: $case_id})<-[*]-(s:sample)
    RETURN s
    """)

    filesBySampleId(sample_id: String!): [file] @cypher(statement: """
    MATCH (s:sample {sample_id: $sample_id})<-[*]-(f:file)
    RETURN f
    """)

    filesOfStudy(study_code: String!): [file] @cypher(statement: """
    MATCH (f:file)-[*]->(sd:study) WHERE sd.clinical_study_designation = $study_code OR sd.accession_id = $study_code
    RETURN DISTINCT(f)
    """)

    studyFiles(study_codes: [String!]): [file] @cypher(statement: """
    MATCH (s:study)<--(f:file)
    WHERE s.clinical_study_designation IN $study_codes OR s.accession_id IN $study_codes
    RETURN f{.*}
    """, passThrough: true)

    "For SBG to replace manifest"
    fileDetail(file_ids: [String] = []): [FileDetail] @cypher(statement: """
    MATCH (f:file)
    WITH collect(f.uuid) AS all_files
    MATCH (f:file)-[*]->(s:study)
    WHERE f.uuid IN CASE $file_ids WHEN [] THEN all_files
    ELSE $file_ids
    END
    OPTIONAL MATCH (f)-[*]->(c:case)
    OPTIONAL MATCH (f)-[*]->(co:cohort)
    OPTIONAL MATCH (f)-[*]->(arm:study_arm)
    OPTIONAL MATCH (demo:demographic)-->(c)
    OPTIONAL MATCH (diag:diagnosis)-->(c)
    OPTIONAL MATCH (f)-[*]->(v:visit)
    OPTIONAL MATCH (f)-->(samp:sample)
    WITH DISTINCT (f) AS f, s, c, co, arm, demo, diag, v, samp,
    f.file_type as file_type,
    c.case_id as case_id
    RETURN{
    clinical_study_designation: s.clinical_study_designation,
    clinical_study_name: s.clinical_study_name,
    arm: arm.arm,
    cohort_description: co.cohort_description,
    cohort_dose: co.cohort_dose,
    case_id: case_id,
    breed: demo.breed,
    weight: demo.weight,
    sex: demo.sex,
    neutered_indicator: demo.neutered_indicator,
    patient_age_at_enrollment: demo.patient_age_at_enrollment,
    disease_term: diag.disease_term,
    stage_of_disease: diag.stage_of_disease,
    primary_disease_site: diag.primary_disease_site,
    concurrent_disease: diag.concurrent_disease,
    concurrent_disease_type: diag.concurrent_disease_type,
    visit_date: v.visit_date,
    visit_number: v.visit_number,
    day_in_cycle: v.day_in_cycle,
    sample_id: samp.sample_id,
    sample_type: samp.physical_sample_type,
    general_sample_pathology: samp.general_sample_pathology,
    specific_sample_pathology: samp.specific_sample_pathology,
    sample_site: samp.sample_site,
    date_of_sample_collection: samp.date_of_sample_collection,
    necropsy_sample: samp.necropsy_sample,
    percentage_tumor: samp.percentage_tumor,
    percentage_stroma: samp.percentage_stroma,
    comment: samp.comment,
    file_name: f.file_name,
    file_type: file_type,
    file_description: f.file_description,
    file_format: f.file_format,
    file_size: f.file_size,
    md5sum: f.md5sum,
    file_location: f.file_location,
    uuid: f.uuid,
    acl: f.acl,
    GUID: 'dg.4DFC/' + f.uuid,
    md5: f.md5sum,
    size: f.file_size,
    url: f.file_location
    }
    ORDER BY file_type, case_id
    """, passThrough: true)

    "For IndexD to replace manifest"
    fileInfo(file_ids: [String] = []): [FileInfo] @cypher(statement: """
    MATCH (f:file)
    WITH collect(f.uuid) as all_files
    MATCH (f:file)
    WHERE f.uuid IN CASE $file_ids WHEN [] THEN all_files ELSE $file_ids END
    WITH f, f.file_location as url
    RETURN{
    GUID: 'dg.4DFC/' + f.uuid,
    md5: f.md5sum,
    size: f.file_size,
    acl: f.acl,
    url: f.file_location
    }
    ORDER BY url
    """, passThrough: true)

    studyStats: [StudyStat] @cypher(statement: """
    MATCH (s:study)
    OPTIONAL MATCH (s)<-[*]-(c:case)
    WITH s, COUNT(DISTINCT c) AS cases
    OPTIONAL MATCH (s)<-[*]-(samp:sample)
    WITH s, cases, COUNT(DISTINCT samp) AS samples
    OPTIONAL MATCH (s)<-[*]-(f:file)
    WITH DISTINCT f, s, cases, samples
    RETURN{
    study_code: s.clinical_study_designation,
    files: COUNT(f),
    total_size_MB: SUM(f.file_size)/1000000,
    cases: cases,
    samples: samples
    }
    """, passThrough: true)

    fileIdsFromFileName(file_name: [String] = [""], order_by: String ="file_name"): [FileOverview] @cypher(statement: """
    MATCH (f:file)
    WHERE ($file_name = [""] OR $file_name IS NULL OR f.file_name IN $file_name)
    WITH
    f.file_name AS file_name,
    f.uuid AS file_uuid
    RETURN{
    file_name: file_name,
    file_uuid: file_uuid
    }
    ORDER BY CASE $order_by
    WHEN 'file_name' THEN file_name
    WHEN 'file_uuid' THEN file_uuid
    ELSE file_name END
    """, passThrough: true)

    fileIdsFromFileNameDesc(file_name: [String] = [""], order_by: String ="file_name"): [FileOverview] @cypher(statement: """
    MATCH (f:file)
    WHERE ($file_name = [""] OR $file_name IS NULL OR f.file_name IN $file_name)
    WITH
    f.file_name AS file_name,
    f.uuid AS file_uuid
    RETURN{
    file_name: file_name,
    file_uuid: file_uuid
    }
    ORDER BY CASE $order_by
    WHEN 'file_name' THEN file_name
    WHEN 'file_uuid' THEN file_uuid
    ELSE file_name END DESC
    """, passThrough: true)

    unifiedViewData(case_ids: [String] = [""]): UnifiedCounts @cypher(statement: """
    MATCH (c:case)
    WHERE ($case_ids = [""] OR $case_ids IS NULL OR c.case_id IN $case_ids)
    OPTIONAL MATCH (s:study)<--(c)
    OPTIONAL MATCH (f:file)-[*]->(c)
    OPTIONAL MATCH (samp:sample)-->(c)
    OPTIONAL MATCH (a:aliquot)-[*]->(c)
    OPTIONAL MATCH (c)-[:member_of]->(sd:study)
    OPTIONAL MATCH (sf:file)-->(sd)
    OPTIONAL MATCH (s)-[:member_of]->(p: program)
    WITH a, s, c, f, samp, sf, p
    RETURN{
    numberOfStudies: COUNT(DISTINCT s),
    numberOfCases: COUNT(DISTINCT c),
    numberOfFiles: COUNT(DISTINCT f) + COUNT(DISTINCT sf),
    numberOfSamples: COUNT(DISTINCT samp),
    numberOfAliquots: COUNT(DISTINCT a),
    numberOfStudyFiles: COUNT(DISTINCT sf),
    numberOfPrograms: COUNT(DISTINCT p),
    volumeOfData: SUM(f.file_size)
    }
    """, passThrough: true)

    studySampleSiteCount(study_codes: [String]): [GroupCount] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation in $study_codes OR s.accession_id in $study_codes
    OPTIONAL MATCH (c:case) --> (s)
    OPTIONAL MATCH (c) <-- (samp: sample)
    WITH DISTINCT(samp.sample_site) AS group, COUNT(DISTINCT samp) AS counts where counts > 0
    RETURN {
    group: group,
    count: counts
    }
    ORDER BY group
    """, passThrough: true)

    studySampleTypeCount(study_codes: [String]): [GroupCount] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation in $study_codes OR s.accession_id in $study_codes
    OPTIONAL MATCH (c:case) --> (s)
    OPTIONAL MATCH (c) <-- (samp: sample)
    WITH DISTINCT(samp.summarized_sample_type) AS group, COUNT(DISTINCT samp) AS counts where counts > 0
    RETURN {
    group: group,
    count: counts
    }
    ORDER BY group
    """, passThrough: true)

    studySamplePathologyCount(study_codes: [String]): [GroupCount] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation in $study_codes OR s.accession_id in $study_codes
    OPTIONAL MATCH (c:case) --> (s)
    OPTIONAL MATCH (c) <-- (samp: sample)
    WITH DISTINCT(samp.specific_sample_pathology) AS group, COUNT(DISTINCT samp) AS counts where counts > 0
    RETURN {
    group: group,
    count: counts
    }
    ORDER BY group
    """, passThrough: true)

    clinicalDataNodeCounts(study_code: String!): ClinicalDataNodeCounts @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    OPTIONAL MATCH (sa:study_arm)<-[:of_study_arm]-(a:agent)
    OPTIONAL MATCH (s)<-[*1..2]-(c:case)
    OPTIONAL MATCH (c)<-[:of_case]-(cy:cycle)
    OPTIONAL MATCH (c)<-[*1..2]-(v:visit)
    OPTIONAL MATCH (c)<-[:of_case]-(fu:follow_up)
    OPTIONAL MATCH (c)<-[:of_case]-(ae:adverse_event)
    OPTIONAL MATCH (c)<-[:of_case]-(e:enrollment)
    OPTIONAL MATCH (c)-[:went_off_treatment]->(ot:off_treatment)
    OPTIONAL MATCH (c)-[:went_off_study]->(os:off_study)
    OPTIONAL MATCH (e)<-[:at_enrollment]-(pt:prior_therapy)
    OPTIONAL MATCH (e)<-[:at_enrollment]-(ps:prior_surgery)
    OPTIONAL MATCH (v)<-[:on_visit]-(aa:agent_administration)
    OPTIONAL MATCH (v)<-[:on_visit]-(pe:physical_exam)
    OPTIONAL MATCH (v)<-[:on_visit]-(vs:vital_signs)
    OPTIONAL MATCH (v)<-[:on_visit]-(de:disease_extent)
    OPTIONAL MATCH (v)<-[:on_visit]-(le:lab_exam)
    RETURN {
    agent: COUNT(DISTINCT a),
    cycle: COUNT(DISTINCT cy),
    visit: COUNT(DISTINCT v),
    follow_up: COUNT(DISTINCT fu),
    adverse_event: COUNT(DISTINCT ae),
    off_treatment: COUNT(DISTINCT ot),
    off_study: COUNT(DISTINCT os),
    prior_therapy: COUNT(DISTINCT pt),
    prior_surgery: COUNT(DISTINCT ps),
    agent_administration: COUNT(DISTINCT aa),
    physical_exam: COUNT(DISTINCT pe),
    vital_signs: COUNT(DISTINCT vs),
    disease_extent: COUNT(DISTINCT de),
    lab_exam: COUNT(DISTINCT le)
    }
    """, passThrough: true)

    clinicalDataNodeCaseCounts(study_code: String!): ClinicalDataNodeCounts @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    OPTIONAL MATCH (sa:study_arm)<-[:of_study_arm]-(a:agent)
    OPTIONAL MATCH (s)<-[*1..2]-(c:case)
    OPTIONAL MATCH (c)<-[:of_case]-(cy:cycle)
    OPTIONAL MATCH (c)<-[*1..2]-(v:visit)
    OPTIONAL MATCH (c)<-[:of_case]-(fu:follow_up)
    OPTIONAL MATCH (c)<-[aeoc:of_case]-(ae:adverse_event)
    OPTIONAL MATCH (c)<-[:of_case]-(e:enrollment)
    OPTIONAL MATCH (c)-[:went_off_treatment]->(ot:off_treatment)
    OPTIONAL MATCH (c)-[:went_off_study]->(os:off_study)
    OPTIONAL MATCH (e)<-[:at_enrollment]-(pt:prior_therapy)
    OPTIONAL MATCH (e)<-[:at_enrollment]-(ps:prior_surgery)
    OPTIONAL MATCH (v)<-[:on_visit]-(aa:agent_administration)
    OPTIONAL MATCH (v)<-[:on_visit]-(pe:physical_exam)
    OPTIONAL MATCH (v)<-[:on_visit]-(vs:vital_signs)
    OPTIONAL MATCH (v)<-[:on_visit]-(de:disease_extent)
    OPTIONAL MATCH (v)<-[:on_visit]-(le:lab_exam)
    RETURN {
    agent: COUNT(DISTINCT a),
    cycle: COUNT(DISTINCT cy.case_id),
    visit: COUNT(DISTINCT left(v.visit_id, 13)),
    follow_up: COUNT(DISTINCT fu),
    adverse_event: COUNT(DISTINCT endNode(aeoc)),
    off_treatment: COUNT(DISTINCT ot),
    off_study: COUNT(DISTINCT os),
    prior_therapy: COUNT(DISTINCT pt),
    prior_surgery: COUNT(DISTINCT ps),
    agent_administration: COUNT(DISTINCT aa),
    physical_exam: COUNT(DISTINCT pe.case_id),
    vital_signs: COUNT(DISTINCT vs.case_id),
    disease_extent: COUNT(DISTINCT de.case_id),
    lab_exam: COUNT(DISTINCT le)
    }
    """, passThrough: true)

    clinicalDataNodeNames: [String] @cypher(statement: """
    UNWIND [
    'AGENT',
    'CYCLE',
    'VISIT',
    'PRIOR THERAPY',
    'PRIOR SURGERY',
    'AGENT ADMINISTRATION',
    'PHYSICAL EXAM',
    'VITAL SIGNS',
    'LAB EXAM',
    'ADVERSE EVENT',
    'DISEASE EXTENT',
    'FOLLOW UP',
    'OFF STUDY',
    'OFF TREATMENT'
    ] AS clinical_data_node_names
    RETURN clinical_data_node_names
    """)

    agentNodeData(study_code: String!): [AgentNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[:member_of]-(sa:study_arm)
    MATCH (sa)<-[:of_study_arm]-(a:agent)
    RETURN DISTINCT a {.*}
    """, passThrough: true)

    cycleNodeData(study_code: String!): [CycleNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[:of_case]-(cy:cycle)
    RETURN DISTINCT cy {.*}
    """, passThrough: true)

    visitNodeData(study_code: String!): [VisitNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[*1..2]-(v:visit)
    WITH DISTINCT v, c
    RETURN {
    case_id: c.case_id,
    visit_date: v.visit_date,
    visit_number: v.visit_number,
    visit_id: v.visit_id
    }
    ORDER BY c.case_id
    """, passThrough: true)

    followUpNodeData(study_code: String!): [FollowUpNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[:of_case]-(fu:follow_up)
    RETURN DISTINCT fu {.*}
    """, passThrough: true)

    adverseEventNodeData(study_code: String!): [AdverseEventNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[:of_case]-(ae:adverse_event)
    WITH DISTINCT ae, c
    RETURN {
    case_id: c.case_id,
    day_in_cycle: ae.day_in_cycle,
    date_of_onset: ae.date_of_onset,
    existing_adverse_event: ae.existing_adverse_event,
    date_of_resolution: ae.date_of_resolution,
    ongoing_adverse_event: ae.ongoing_adverse_event,
    adverse_event_term: ae.adverse_event_term,
    adverse_event_description: ae.adverse_event_description,
    adverse_event_grade: ae.adverse_event_grade,
    adverse_event_grade_description: ae.adverse_event_grade_description,
    adverse_event_agent_name: ae.adverse_event_agent_name,
    adverse_event_agent_dose: ae.adverse_event_agent_dose,
    attribution_to_research: ae.attribution_to_research,
    attribution_to_ind: ae.attribution_to_ind,
    attribution_to_disease: ae.attribution_to_disease,
    attribution_to_commercial: ae.attribution_to_commercial,
    attribution_to_other: ae.attribution_to_other,
    other_attribution_description: ae.other_attribution_description,
    dose_limiting_toxicity: ae.dose_limiting_toxicity,
    unexpected_adverse_event: ae.unexpected_adverse_event
    }
    ORDER BY c.case_id
    """, passThrough: true)

    offTreatmentNodeData(study_code: String!): [OffTreatmentNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)-[:went_off_treatment]->(ot:off_treatment)
    RETURN DISTINCT ot {.*}
    """, passThrough: true)

    offStudyNodeData(study_code: String!): [OffStudyNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)-[:went_off_study]->(os:off_study)
    RETURN DISTINCT os {.*}
    """, passThrough: true)

    priorTherapyNodeData(study_code: String!): [PriorTherapyNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[:of_case]-(e:enrollment)
    MATCH (e)<-[:at_enrollment]-(pt:prior_therapy)
    RETURN DISTINCT pt {.*}
    """, passThrough: true)

    priorSurgeryNodeData(study_code: String!): [PriorSurgeryNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[:of_case]-(e:enrollment)
    MATCH (e)<-[:at_enrollment]-(ps:prior_surgery)
    WITH DISTINCT c, ps
    RETURN {
    case_id: c.case_id,
    date_of_surgery: ps.date_of_surgery,
    procedure: ps.procedure,
    anatomical_site_of_surgery: ps.anatomical_site_of_surgery,
    surgical_finding: ps.surgical_finding,
    residual_disease: ps.residual_disease,
    therapeutic_indicator: ps.therapeutic_indicator
    }
    ORDER BY c.case_id
    """, passThrough: true)

    agentAdministrationNodeData(study_code: String!): [AgentAdministrationNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[*1..2]-(v:visit)
    MATCH (v)<-[:on_visit]-(aa:agent_administration)
    RETURN DISTINCT aa {.*}
    """, passThrough: true)

    physicalExamNodeData(study_code: String!): [PhysicalExamNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[*1..2]-(v:visit)
    MATCH (v)<-[:on_visit]-(pe:physical_exam)
    WITH DISTINCT pe, c
    RETURN {
    case_id: c.case_id,
    date_of_examination: pe.date_of_examination,
    day_in_cycle: pe.day_in_cycle,
    body_system: pe.body_system,
    pe_finding: pe.pe_finding,
    pe_comment: pe.pe_comment,
    phase_pe: pe.phase_pe,
    assessment_timepoint: pe.assessment_timepoint
    }
    ORDER BY c.case_id
    """, passThrough: true)

    vitalSignsNodeData(study_code: String!): [VitalSignsNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[*1..2]-(v:visit)
    MATCH (v)<-[:on_visit]-(vs:vital_signs)
    RETURN DISTINCT vs {.*}
    """, passThrough: true)

    diseaseExtentNodeData(study_code: String!): [DiseaseExtentNodeData] @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[*1..2]-(v:visit)
    MATCH (v)<-[:on_visit]-(de:disease_extent)
    WITH DISTINCT de, c
    RETURN {
    case_id: c.case_id,
    lesion_number: de.lesion_number,
    lesion_site: de.lesion_site,
    lesion_description: de.lesion_description,
    previously_irradiated: de.previously_irradiated,
    previously_treated: de.previously_treated,
    measurable_lesion: de.measurable_lesion,
    target_lesion: de.target_lesion,
    date_of_evaluation: de.date_of_evaluation,
    measured_how: de.measured_how,
    longest_measurement: de.longest_measurement,
    evaluation_number: de.evaluation_number,
    evaluation_code: de.evaluation_code
    }
    ORDER BY c.case_id
    """, passThrough: true)

    # labExamNodeData(study_code: String!): [LabExamNodeData] @cypher(statement: """
    # MATCH (s:study)
    # WHERE s.clinical_study_designation = $study_code
    # MATCH (s)<-[*1..2]-(c:case)
    # MATCH (c)<-[*1..2]-(v:visit)
    # MATCH (v)<-[:on_visit]-(le:lab_exam)
    # RETURN DISTINCT le {.*}
    # """, passThrough: true)

    priorSurgeryNodeDataOverview(study_code: String!): PriorSurgeryNodeDataOverview @cypher(statement: """
    MATCH (s:study)
    WHERE s.clinical_study_designation = $study_code
    MATCH (s)<-[*1..2]-(c:case)
    MATCH (c)<-[:of_case]-(e:enrollment)
    MATCH (e)<-[:at_enrollment]-(ps:prior_surgery)
    WITH DISTINCT c, ps
    ORDER BY c.case_id
    RETURN
    {
      case_count: COUNT(DISTINCT c),
      prior_surgeries: collect({
        case_id: c.case_id,
        date_of_surgery: ps.date_of_surgery,
        procedure: ps.procedure,
        anatomical_site_of_surgery: ps.anatomical_site_of_surgery,
        surgical_finding: ps.surgical_finding,
        residual_disease: ps.residual_disease,
        therapeutic_indicator: ps.therapeutic_indicator
      })
    }
    """, passThrough: true)

    cartOverview(file_uuids: [String!]): CartOverviewData @cypher(statement: """
    MATCH (f:file)
    WHERE f.uuid IN $file_uuids
    OPTIONAL MATCH (f)-->(parent)
    OPTIONAL MATCH (f)-[*]->(c:case)
    OPTIONAL MATCH (s:study)<-[:member_of]-(c)
    WITH
      COLLECT(f) AS files,
      COUNT(DISTINCT f) AS totalFiles,
      COLLECT(DISTINCT s.clinical_study_designation) AS studies,
      COUNT(DISTINCT c) AS totalCases,
      COLLECT(head(labels(parent))) AS parents
    CALL {
      WITH files
      UNWIND files AS f
      WITH f.file_type AS fileType, COUNT(*) AS fileTypeCount
      RETURN COLLECT({ label: fileType, value: fileTypeCount }) AS fileTypeCounts
    }
    CALL {
      WITH files
      UNWIND files AS f
      WITH f.file_format AS fileFormat, COUNT(*) AS fileFormatCount
      RETURN COLLECT({ label: fileFormat, value: fileFormatCount }) AS fileFormatCounts
    }
    CALL {
      WITH parents
      UNWIND parents AS p
      WITH p AS fileAssociation, COUNT(*) AS fileAssociationCount
      RETURN COLLECT({ label: fileAssociation, value: fileAssociationCount }) AS fileAssociationCounts
    }
    RETURN {
      totalNumberOfFiles: totalFiles,
      studiesInCart: studies,
      totalNumberOfCases: totalCases,
      charts: {
        fileType: fileTypeCounts,
        fileFormat: fileFormatCounts,
        fileAssociation: fileAssociationCounts
      }
    }
    """, passThrough: true)

    humanRelevanceNodeData(study_codes: [String] = [""]): [HumanRelevanceNodeData] @cypher(statement: """
    MATCH (hr:human_relevance)
    WHERE $study_codes IN [[], [""]] OR hr.human_relevance_record_id IN $study_codes
    RETURN DISTINCT {
        human_relevance_record_id: hr.human_relevance_record_id,
        human_relevance_statement: hr.human_relevance_statement,
        relevant_human_cancer: apoc.convert.fromJsonList(hr.relevant_human_cancer),
        relevant_experimental_therapeutic_intervention: apoc.convert.fromJsonList(hr.relevant_experimental_therapeutic_intervention),
        relevant_human_genes: apoc.convert.fromJsonList(hr.relevant_human_genes),
        relevant_human_pathways: apoc.convert.fromJsonList(hr.relevant_human_pathways),
        nci_link_to_relevant_human_cancer: hr.nci_link_to_relevant_human_cancer
    }
    """, passThrough: true)
}
